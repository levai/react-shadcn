---
alwaysApply: true
description: é¡¹ç›®æ ¸å¿ƒå¼€å‘è§„èŒƒå’Œæ¶æ„æŒ‡å¯¼åŸåˆ™ï¼ˆå‰åç«¯ï¼‰
---

# é¡¹ç›®å¼€å‘è§„èŒƒ

> ğŸ“– **è¯¦ç»†è§„èŒƒ**ï¼š
> - å‰ç«¯ï¼šæŸ¥çœ‹ [`frontend/docs/rules/ai-instructions.md`](../../frontend/docs/rules/ai-instructions.md)
> - åç«¯ï¼šæŸ¥çœ‹ [`backend/docs/rules/ai-instructions.md`](../../backend/docs/rules/ai-instructions.md)

æœ¬é¡¹ç›®æ˜¯**å‰åç«¯åˆ†ç¦»**æ¶æ„ï¼Œå‰ç«¯ä½¿ç”¨ **Feature-Sliced Design (FSD)**ï¼Œåç«¯ä½¿ç”¨**åˆ†å±‚æ¶æ„**æ¨¡å¼ã€‚

---

## ğŸ¨ å‰ç«¯è§„èŒƒ

### å‰ç«¯æŠ€æœ¯æ ˆ

- React 19 + TypeScript 5.9
- Vite 7 + Tailwind CSS 4
- **Ant Design** (ä¸»è¦ UI ç»„ä»¶åº“) â­
- Zustand (çŠ¶æ€ç®¡ç†)
- React Router 7 (è·¯ç”±)
- Axios (HTTP å®¢æˆ·ç«¯)
- react-i18next (å›½é™…åŒ–)
- ahooks (Hooks åº“)
- sonner (Toast é€šçŸ¥ï¼Œç”¨äºé Ant Design åœºæ™¯)
- lucide-react (å›¾æ ‡åº“)

### å‰ç«¯ç›®å½•ç»“æ„

```typescript
src/
â”œâ”€â”€ app/              # åº”ç”¨å±‚ï¼šå…¥å£ã€Providerã€å¸ƒå±€
â”œâ”€â”€ features/         # åŠŸèƒ½å±‚ï¼šä¸šåŠ¡åŠŸèƒ½æ¨¡å—
â”‚   â””â”€â”€ [feature]/
â”‚       â”œâ”€â”€ ui/       # UI ç»„ä»¶
â”‚       â”œâ”€â”€ api/      # API æœåŠ¡
â”‚       â”œâ”€â”€ model/    # çŠ¶æ€ç®¡ç† (Zustand)
â”‚       â””â”€â”€ index.ts  # ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ pages/            # é¡µé¢å±‚ï¼šè·¯ç”±å…¥å£
â”œâ”€â”€ shared/           # å…±äº«å±‚ï¼šå·¥å…·ã€ç±»å‹ã€é…ç½®
â””â”€â”€ routes/           # è·¯ç”±é…ç½®
```

### å‰ç«¯æ ¸å¿ƒè§„åˆ™

#### è·¯å¾„åˆ«å

**å¿…é¡»ä½¿ç”¨ `@/` å‰ç¼€ï¼Œç¦æ­¢ç›¸å¯¹è·¯å¾„ï¼š**

```typescript
// âœ… æ­£ç¡®
import { LoginForm } from '@/features/auth'
import { cn } from '@/shared/lib'

// âŒ é”™è¯¯
import { LoginForm } from '../../features/auth'
```

#### å¯¼å…¥è§„åˆ™

1. **ä» feature çš„ `index.ts` å¯¼å…¥**ï¼Œä¸è¦å¯¼å…¥å†…éƒ¨æ–‡ä»¶
2. **ä½¿ç”¨å…·åå¯¼å…¥**ï¼Œé¿å… `import *`
3. **å…±äº« Hooks ä» `@/shared/hooks` å¯¼å…¥**

```typescript
// âœ… æ­£ç¡®
import { LoginForm, useAuthStore, authService } from '@/features/auth'
import { useRequest } from '@/shared/hooks'

// âŒ é”™è¯¯
import { LoginForm } from '@/features/auth/ui/LoginForm'
```

#### æ•°æ®è¯·æ±‚

**ç»Ÿä¸€ä½¿ç”¨ `useRequest` Hookï¼š**

```typescript
import { useRequest } from '@/shared/hooks'

const { data, loading, error } = useRequest(
  () => userService.getUser(userId),
  { refreshDeps: [userId] }
)
```

#### å›½é™…åŒ–

**å¿…é¡»ä½¿ç”¨ i18nï¼Œç¦æ­¢ç¡¬ç¼–ç æ–‡æœ¬ï¼š**

```typescript
import { useTranslation } from '@/shared/i18n'

const { t } = useTranslation('common')
return <div>{t('actions.confirm')}</div>
```

#### è·¯ç”±

**ä½¿ç”¨ ROUTES å¸¸é‡ï¼Œç¦æ­¢ç¡¬ç¼–ç è·¯å¾„ï¼š**

```typescript
import { ROUTES } from '@/shared/constants'
navigate(ROUTES.HOME)  // âœ… æ­£ç¡®
navigate('/')          // âŒ é”™è¯¯
```

#### æ ·å¼

**ä½¿ç”¨ `cn()` å·¥å…·å‡½æ•°ï¼š**

```typescript
import { cn } from '@/shared/lib'
<div className={cn('base', isActive && 'active')} />
```

**ä½¿ç”¨ CSS å˜é‡ï¼Œç¦æ­¢ç¡¬ç¼–ç é¢œè‰²ï¼š**

```typescript
className="bg-primary text-primary-foreground"  // âœ… æ­£ç¡®
className="bg-[#05C79A]"                        // âŒ é”™è¯¯
```

#### UI ç»„ä»¶åº“

**é¡¹ç›®å®Œå…¨ä½¿ç”¨ Ant Design ä½œä¸ºä¸»è¦ UI ç»„ä»¶åº“ï¼ŒTailwind CSS ä»…ç”¨äºå¸ƒå±€å’Œè‡ªå®šä¹‰æ ·å¼è¡¥å……ã€‚**

**æ ¸å¿ƒåŸåˆ™ï¼š**
- **æ‰€æœ‰ UI ç»„ä»¶ç»Ÿä¸€ä½¿ç”¨ Ant Design çš„è®¾è®¡è¯­è¨€** â­
- **Toast é€šçŸ¥ä½¿ç”¨ sonner** â­

```typescript
// âœ… æ­£ç¡® - ä» antd å¯¼å…¥ç»„ä»¶
import { Button, Input, Form, Card, Table, Modal, Row, Col, Space } from 'antd'

// âŒ é”™è¯¯ - ä¸è¦ä» @/shared/ui å¯¼å…¥ UI ç»„ä»¶ï¼ˆå·²ç§»é™¤ï¼‰
import { Button } from '@/shared/ui'
```

> ğŸ“– **è¯¦ç»†æŒ‡å—**ï¼šæŸ¥çœ‹ [`frontend/docs/rules/ui.md`](../../frontend/docs/rules/ui.md) äº†è§£å®Œæ•´çš„ä½¿ç”¨è§„èŒƒå’Œæœ€ä½³å®è·µã€‚

#### å›¾æ ‡å’Œé€šçŸ¥

**ç»Ÿä¸€ä½¿ç”¨ï¼š**

- å›¾æ ‡ï¼š`lucide-react`
- Toastï¼š**ç»Ÿä¸€ä½¿ç”¨ `sonner` çš„ `toast` API**

```typescript
import { toast } from 'sonner'
import { Home } from 'lucide-react'

<Home className="h-5 w-5" />
toast.success('æ“ä½œæˆåŠŸ')
toast.error('æ“ä½œå¤±è´¥')
toast.warning('è¯·æ³¨æ„')
toast.info('æç¤ºä¿¡æ¯')
```

**Toaster Provider å·²å…¨å±€é…ç½®ï¼š**

é¡¹ç›®å·²åœ¨ `ToasterProvider` ä¸­é…ç½®äº†å…¨å±€ Toasterï¼š
- è‡ªåŠ¨æ ¹æ®å½“å‰ä¸»é¢˜çš„ `isDark` é…ç½®è®¾ç½® `theme` propï¼ˆ`'light'` æˆ– `'dark'`ï¼‰
- ä½¿ç”¨ `richColors` å¯ç”¨ä¸°å¯Œçš„é¢œè‰²åŒºåˆ†ï¼ˆSuccess=ç»¿è‰²ï¼ŒError=çº¢è‰²ï¼ŒWarning=æ©™è‰²ï¼ŒInfo=è“è‰²ï¼‰
- æ”¯æŒæ‰€æœ‰è‡ªå®šä¹‰ä¸»é¢˜ï¼ˆå¦‚ `theme-blue`ï¼‰ï¼Œä¼šæ ¹æ®å…¶ `isDark` é…ç½®è‡ªåŠ¨é€‚é…

---

## âš™ï¸ åç«¯è§„èŒƒ

### åç«¯æŠ€æœ¯æ ˆ

- FastAPI 0.128+ (Web æ¡†æ¶)
- SQLAlchemy 2.0.45+ (ORM)
- Pydantic 2.12+ (æ•°æ®éªŒè¯)
- Python 3.12+ (ç¼–ç¨‹è¯­è¨€)
- structlog 25.5+ (ç»“æ„åŒ–æ—¥å¿—)
- python-jose 3.5+ (JWT è®¤è¯)
- Alembic 1.15+ (æ•°æ®åº“è¿ç§»)
- Uvicorn 0.40+ (ASGI æœåŠ¡å™¨)

### åç«¯ç›®å½•ç»“æ„

```python
app/
â”œâ”€â”€ api/              # API è·¯ç”±å±‚ï¼ˆControllerï¼‰
â”‚   â””â”€â”€ v1/
â”œâ”€â”€ services/         # ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆServiceï¼‰
â”œâ”€â”€ repositories/     # æ•°æ®è®¿é—®å±‚ï¼ˆRepositoryï¼‰â­
â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹å±‚ï¼ˆORM Modelï¼‰
â”œâ”€â”€ schemas/          # æ•°æ®éªŒè¯å±‚ï¼ˆSchemaï¼‰
â”œâ”€â”€ core/             # æ ¸å¿ƒé…ç½®
â”‚   â””â”€â”€ unit_of_work.py  # Unit of Work â­
â”œâ”€â”€ middleware/       # ä¸­é—´ä»¶
â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
```

### åç«¯æ ¸å¿ƒè§„åˆ™

#### åç«¯åˆ†å±‚æ¶æ„

**å¿…é¡»éµå¾ªåˆ†å±‚æ¶æ„åŸåˆ™ï¼š**

```python
Router (API Layer)      # åªå¤„ç† HTTP è¯·æ±‚/å“åº”
    â†“
Service (Business Logic) # ä¸šåŠ¡é€»è¾‘å¤„ç†
    â†“
Unit of Work            # äº‹åŠ¡ç®¡ç† â­
    â†“
Repository              # æ•°æ®è®¿é—®æŠ½è±¡ â­
    â†“
Model (ORM)             # æ•°æ®åº“æ¨¡å‹
    â†“
Database
```

#### åç«¯å¯¼å…¥è§„åˆ™

**å¿…é¡»ä½¿ç”¨ç»å¯¹å¯¼å…¥ï¼Œç¦æ­¢ç›¸å¯¹è·¯å¾„ï¼š**

```python
# âœ… æ­£ç¡®
from app.services.auth_service import AuthService
from app.core.dependencies import get_auth_service

# âŒ é”™è¯¯
from ..services.auth_service import AuthService
```

#### åç«¯æœåŠ¡å±‚è§„èŒƒ

**ä¸šåŠ¡é€»è¾‘å¿…é¡»åœ¨æœåŠ¡å±‚ï¼Œç¦æ­¢åœ¨è·¯ç”±å±‚ï¼š**

```python
# âœ… æ­£ç¡®ï¼šè·¯ç”±å±‚åªå¤„ç† HTTP
@router.post("/login")
async def login(
    login_data: UserLogin,
    auth_service: AuthService = Depends(get_auth_service),
):
    return auth_service.login(login_data.username, login_data.password)

# âŒ é”™è¯¯ï¼šä¸šåŠ¡é€»è¾‘åœ¨è·¯ç”±å±‚
@router.post("/login")
async def login(login_data: UserLogin, db: Session = Depends(get_db)):
    user = db.query(User).filter(...).first()  # âŒ
```

#### åç«¯å¼‚å¸¸å¤„ç†è§„èŒƒ

**å¿…é¡»ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œç¦æ­¢ç›´æ¥æŠ›å‡º HTTPExceptionï¼š**

```python
# âœ… æ­£ç¡®
from app.core.exceptions import NotFoundError

def get_user(self, user_id: str):
    if not user:
        raise NotFoundError("ç”¨æˆ·ä¸å­˜åœ¨")

# âŒ é”™è¯¯
from fastapi import HTTPException
raise HTTPException(status_code=404, detail="ç”¨æˆ·ä¸å­˜åœ¨")  # âŒ
```

#### åç«¯ç»Ÿä¸€å“åº”æ ¼å¼

**æ‰€æœ‰ API å“åº”ï¼ˆé™¤ç™»å½•æ¥å£å¤–ï¼‰ä½¿ç”¨ç»Ÿä¸€æ ¼å¼ï¼š**

```json
{
  "code": HTTPçŠ¶æ€ç ï¼ˆ200è¡¨ç¤ºæˆåŠŸï¼Œå…¶ä»–è¡¨ç¤ºé”™è¯¯ï¼‰,
  "message": "å“åº”æ¶ˆæ¯ï¼ˆå¯é€‰ï¼‰",
  "data": "å“åº”æ•°æ®ï¼ˆæˆåŠŸæ—¶ä¸ºæ•°æ®ï¼Œé”™è¯¯æ—¶ä¸º nullï¼‰"
}
```

**æˆåŠŸå“åº”ç¤ºä¾‹ï¼š**

```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {...}
}
```

**é”™è¯¯å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "code": 401,
  "message": "è®¤è¯å¤±è´¥",
  "data": null
}
```

---

## ğŸ“‹ å…³é”®è§„åˆ™æ€»ç»“

### å‰ç«¯

1. âœ… ä½¿ç”¨ `@/` è·¯å¾„åˆ«å
2. âœ… ä» feature çš„ `index.ts` å¯¼å…¥
3. âœ… ä½¿ç”¨ `cn()` å¤„ç†ç±»å
4. âœ… ä½¿ç”¨ TypeScript ç±»å‹
5. âœ… å§‹ç»ˆä½¿ç”¨ i18n
6. âœ… ä½¿ç”¨ `useRequest` è¿›è¡Œæ•°æ®è¯·æ±‚
7. âœ… ä½¿ç”¨ ROUTES å¸¸é‡
8. âœ… **ç»Ÿä¸€ä½¿ç”¨ Ant Design ç»„ä»¶å’Œ sonner çš„ toast API** â­
9. âœ… ä½¿ç”¨ lucide-react å›¾æ ‡
10. âœ… éµå¾ª FSD æ¶æ„

### åç«¯

1. âœ… éµå¾ªåˆ†å±‚æ¶æ„ï¼ˆRouter â†’ Service â†’ Unit of Work â†’ Repository â†’ Modelï¼‰
2. âœ… ä¸šåŠ¡é€»è¾‘åœ¨æœåŠ¡å±‚ï¼Œè·¯ç”±å±‚åªå¤„ç† HTTP
3. âœ… ä½¿ç”¨ Repository Patternï¼Œç¦æ­¢æœåŠ¡å±‚ç›´æ¥ä½¿ç”¨ ORM â­
4. âœ… ä½¿ç”¨ Unit of Work Pattern ç®¡ç†äº‹åŠ¡ â­
5. âœ… ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸ç±»ï¼Œç¦æ­¢ç›´æ¥æŠ›å‡º HTTPException
6. âœ… ç»Ÿä¸€å“åº”æ ¼å¼ï¼š`{"code": HTTPçŠ¶æ€ç , "message": "...", "data": ...}` â­
7. âœ… ä½¿ç”¨ä¾èµ–æ³¨å…¥è·å–æœåŠ¡
8. âœ… ä½¿ç”¨ Pydantic Schema è¿›è¡Œæ•°æ®éªŒè¯
9. âœ… ä½¿ç”¨ç±»å‹æç¤º
10. âœ… åœ¨æœåŠ¡å±‚è®°å½•æ—¥å¿—
11. âœ… ä½¿ç”¨ç»å¯¹å¯¼å…¥

---

## ğŸ“š è¯¦ç»†è§„èŒƒ

**ç»Ÿä¸€è§„èŒƒæºæ–‡ä»¶ï¼ˆåŒ…å«æ‰€æœ‰æ–‡æ¡£é“¾æ¥ï¼‰ï¼š**

- **å‰ç«¯**ï¼š[AI ç¼–ç¨‹åŠ©æ‰‹ç»Ÿä¸€è§„èŒƒ](../../frontend/docs/rules/ai-instructions.md) - æ‰€æœ‰è¯¦ç»†è§„åˆ™ã€ä»£ç ç¤ºä¾‹å’Œå®Œæ•´æ–‡æ¡£åˆ—è¡¨ï¼ˆ**å”¯ä¸€ç»´æŠ¤æº**ï¼‰
- **åç«¯**ï¼š[AI ç¼–ç¨‹åŠ©æ‰‹ç»Ÿä¸€è§„èŒƒ](../../backend/docs/rules/ai-instructions.md) - æ‰€æœ‰è¯¦ç»†è§„åˆ™ã€ä»£ç ç¤ºä¾‹å’Œå®Œæ•´æ–‡æ¡£åˆ—è¡¨ï¼ˆ**å”¯ä¸€ç»´æŠ¤æº**ï¼‰
